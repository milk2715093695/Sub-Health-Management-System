<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>Chat Test</title>
</head>
<body>
<label for="inputBox"></label>
<input id="inputBox" type="text">
<button onclick="sendInput()">Send</button>
<label for="outputBox"></label>
<textarea id="outputBox"></textarea>

<script>
    function sendInput() {
        const inputBox = document.getElementById("inputBox");
        const outputBox = document.getElementById("outputBox");
        const userInput = inputBox.value;

        // 创建一个新的事件源（EventSource），用来监听服务器发送的SSE事件
        const eventSource = new EventSource(`/api/chat?userInput=${userInput}`);

        // 设置一个事件监听器，用来处理服务器发送的消息
        eventSource.onmessage = function (event) {
            // event.data就是服务器发送的消息
            outputBox.value += event.data;
        };

        // 清空输入框
        inputBox.value = '';
    }
</script>
</body>
</html>